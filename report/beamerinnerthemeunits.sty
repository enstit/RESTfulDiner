%% beamerinnerthemeunits.sty
%% Copyright (c) 2025 Enrico Stefanel <enrico.stefanel@studenti.units.it>

\usepackage{hyperref}
\newcommand{\email}[1]{\texttt{\href{mailto:#1}{#1}}}

\usepackage[yyyymmdd]{datetime}
\renewcommand{\dateseparator}{--}

\setbeamertemplate{itemize items}[circle]
\setbeamertemplate{enumerate items}[circle]

\usepackage{listings}
\renewcommand{\lstlistingname}{Code}

\lstdefinestyle{UNITSListingStyle}{
    backgroundcolor=\color{UNITSSugarPaper},   
    commentstyle=\color{UNITSGrassGreen},
    keywordstyle=\color{UNITSCherry},
    numberstyle=\tiny,
    stringstyle=\color{UNITSDarkCherry},
    basicstyle=\tiny,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2,
    numberblanklines=false,
    countblanklines=false
}

\lstdefinelanguage{PythonPlus}[]{Python}{
  morekeywords=[1]{,as,assert,nonlocal,with,yield,self,True,False,None,} % Python builtin
  morekeywords=[2]{,__init__,__add__,__mul__,__div__,__sub__,__call__,__getitem__,__setitem__,__eq__,__ne__,__nonzero__,__rmul__,__radd__,__repr__,__str__,__get__,__truediv__,__pow__,__name__,__future__,__all__,}, % magic methods
  morekeywords=[3]{,object,type,isinstance,copy,deepcopy,zip,enumerate,reversed,list,set,len,dict,tuple,range,xrange,append,execfile,real,imag,reduce,str,repr,}, % common functions
  morekeywords=[4]{,Exception,NameError,IndexError,SyntaxError,TypeError,ValueError,OverflowError,ZeroDivisionError,}, % errors
  morekeywords=[5]{,ode,fsolve,sqrt,exp,sin,cos,arctan,arctan2,arccos,pi, array,norm,solve,dot,arange,isscalar,max,sum,flatten,shape,reshape,find,any,all,abs,plot,linspace,legend,quad,polyval,polyfit,hstack,concatenate,vstack,column_stack,empty,zeros,ones,rand,vander,grid,pcolor,eig,eigs,eigvals,svd,qr,tan,det,logspace,roll,min,mean,cumsum,cumprod,diff,vectorize,lstsq,cla,eye,xlabel,ylabel,squeeze,}, % numpy / math
}

\makeatletter
\lst@Key{countblanklines}{true}[t]%
    {\lstKV@SetIf{#1}\lst@ifcountblanklines}
\lst@AddToHook{OnEmptyLine}{%
    \lst@ifnumberblanklines\else%
       \lst@ifcountblanklines\else%
         \advance\c@lstnumber-\@ne\relax%
       \fi%
    \fi}
\makeatother

\lstset{style=UNITSListingStyle}

\usepackage{caption}
\captionsetup{skip=\baselineskip,font=scriptsize}

\usepackage[backend=bibtex,style=numeric,sorting=ynt,maxbibnames=99,urldate=iso,autocite=superscript]{biblatex}
\addbibresource{reference.bib}
\setbeamertemplate{bibliography item}[text]

\DeclareCiteCommand{\supercite}[\mkbibsuperscript]
  {\iffieldundef{prenote}
     {}
     {\BibliographyWarning{Ignoring prenote argument}}%
   \iffieldundef{postnote}
     {}
     {\BibliographyWarning{Ignoring postnote argument}}}
  {\usebibmacro{citeindex}%
   \bibopenbracket\usebibmacro{cite}\bibclosebracket}
  {\supercitedelim}
  {}